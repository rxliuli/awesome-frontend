import{r as e,o as n,c as a,a as s,F as l,b as r}from"./app.9c7fb106.js";const o={},t=s("blockquote",null,[s("p",null,[r("已转入 yarn2，放弃使用 lerna+yarn1 的组合，具体原因参考 "),s("a",{href:"/p/556ea9eee38842c0be108ada810b711f"},"yarn2 使用"),r(" 中描述的动机。")])],-1),i=s("h2",{id:"根据依赖图并行运行-npm-命令",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#根据依赖图并行运行-npm-命令","aria-hidden":"true"},"#"),r(" 根据依赖图并行运行 npm 命令")],-1),u=s("div",{class:"language-bash ext-sh line-numbers-mode"},[s("pre",{class:"language-bash"},[s("code",null,[r("lerna run --include-dependencies --stream "),s("span",{class:"token operator"},"<"),r("npm script"),s("span",{class:"token operator"},">"),r("\n")])]),s("div",{class:"line-numbers"},[s("span",{class:"line-number"},"1"),s("br")])],-1),c=r("参考: "),d={href:"https://github.com/lerna/lerna/blob/main/commands/run/README.md#--stream",target:"_blank",rel:"noopener noreferrer"},p=r("--stream"),b=r(" 和 "),h={href:"https://github.com/lerna/lerna/blob/main/core/filter-options/README.md#--include-dependencies",target:"_blank",rel:"noopener noreferrer"},m=r("--include-dependencies"),g=s("h2",{id:"rollup-捆绑-monorepo-仍然存在错误",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#rollup-捆绑-monorepo-仍然存在错误","aria-hidden":"true"},"#"),r(" rollup 捆绑 monorepo 仍然存在错误")],-1),f=r("目前 rollup + node-resolve 插件捆绑本地依赖时仍然存在一些问题，参考："),k={href:"https://github.com/rollup/plugins/issues/743",target:"_blank",rel:"noopener noreferrer"},x=r("https://github.com/rollup/plugins/issues/743"),v=r("，目前的替代方案是 "),j={href:"https://esbuild.github.io/",target:"_blank",rel:"noopener noreferrer"},y=r("esbuild"),_=r("。"),E=s("h2",{id:"有时候会始终无法安装正确的版本",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#有时候会始终无法安装正确的版本","aria-hidden":"true"},"#"),r(" 有时候会始终无法安装正确的版本")],-1),q=s("p",null,"例如在 package.json 中声明了依赖",-1),A=s("div",{class:"language-json ext-json line-numbers-mode"},[s("pre",{class:"language-json"},[s("code",null,[s("span",{class:"token punctuation"},"{"),r("\n  "),s("span",{class:"token property"},'"rollup"'),s("span",{class:"token operator"},":"),r(),s("span",{class:"token string"},'"^2.51.0"'),r(),s("span",{class:"token comment"},"// 实际安装的可能是 2.50.6"),r("\n"),s("span",{class:"token punctuation"},"}"),r("\n")])]),s("div",{class:"line-numbers"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br")])],-1),D=s("p",null,[s("img",{src:"/assets/019d27e1c9224c39b2214fb943dd3c06.896c4044.png",alt:"1622999313766"})],-1),M=s("h2",{id:"强制发布新版本",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#强制发布新版本","aria-hidden":"true"},"#"),r(" 强制发布新版本")],-1),R=s("p",null,[r("有时候，你也许不小心发布了一个错误的版本，如果希望重新发布，请使用 "),s("code",null,"lerna publish --force-publish"),r("。")],-1),F=s("h2",{id:"适用场景",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#适用场景","aria-hidden":"true"},"#"),r(" 适用场景")],-1),L=s("ul",null,[s("li",null,"多个开源工具库：例如 babel、react、vue 这种包含许多功能的开源项目"),s("li",null,"不同技术栈的功能的分离：例如分离 electron 主进程与渲染进程，分别在不同的模块开发")],-1),O=s("h2",{id:"如何清理所有-node-modules-和-dist",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#如何清理所有-node-modules-和-dist","aria-hidden":"true"},"#"),r(" 如何清理所有 node_modules 和 dist")],-1),w=s("div",{class:"language-bash ext-sh line-numbers-mode"},[s("pre",{class:"language-bash"},[s("code",null,[r("lerna clean -y "),s("span",{class:"token operator"},"&&"),r(" lerna "),s("span",{class:"token builtin class-name"},"exec"),r(" -- rimraf dist\n")])]),s("div",{class:"line-numbers"},[s("span",{class:"line-number"},"1"),s("br")])],-1);o.render=function(r,o){const z=e("OutboundLink");return n(),a(l,null,[t,i,u,s("blockquote",null,[s("p",null,[c,s("a",d,[p,s(z)]),b,s("a",h,[m,s(z)])])]),g,s("p",null,[f,s("a",k,[x,s(z)]),v,s("a",j,[y,s(z)]),_]),E,q,A,D,M,R,F,L,O,w],64)};export{o as default};
