import{r as n,o as s,c as a,a as e,F as l,b as t}from"./app.7980cf23.js";const o={},c=e("h2",{id:"环境",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#环境","aria-hidden":"true"},"#"),t(" 环境")],-1),p=e("ul",null,[e("li",null,"Windows 10"),e("li",null,"NodeJS 12"),e("li",null,"WebStorm"),e("li",null,"VSCode（编写 markdown 文档）")],-1),r=e("h2",{id:"创建-lerna-项目",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#创建-lerna-项目","aria-hidden":"true"},"#"),t(" 创建 lerna 项目")],-1),u=e("p",null,[t("创建目录 "),e("em",null,"electron_example"),t("，然后使用 yarn 初始化")],-1),i=e("div",{class:"language-bash ext-sh line-numbers-mode"},[e("pre",{class:"language-bash"},[e("code",null,[e("span",{class:"token function"},"mkdir"),t(" electron_example "),e("span",{class:"token operator"},"&&"),t(),e("span",{class:"token builtin class-name"},"cd"),t(" electron_example\n"),e("span",{class:"token function"},"yarn"),t(" init -y\n")])]),e("div",{class:"line-numbers"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br")])],-1),k=e("p",null,[t("修改 "),e("em",null,"package.json")],-1),b=e("div",{class:"language-json ext-json line-numbers-mode"},[e("pre",{class:"language-json"},[e("code",null,[e("span",{class:"token punctuation"},"{"),t("\n  "),e("span",{class:"token property"},'"name"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"electron_example"'),e("span",{class:"token punctuation"},","),t("\n  "),e("span",{class:"token property"},'"version"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"1.0.0"'),e("span",{class:"token punctuation"},","),t("\n  "),e("span",{class:"token property"},'"private"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token boolean"},"true"),e("span",{class:"token punctuation"},","),t("\n  "),e("span",{class:"token property"},'"license"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"MIT"'),e("span",{class:"token punctuation"},","),t("\n  "),e("span",{class:"token property"},'"workspaces"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token punctuation"},"{"),t("\n    "),e("span",{class:"token property"},'"packages"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token punctuation"},"["),e("span",{class:"token string"},'"apps/*"'),e("span",{class:"token punctuation"},"]"),t("\n  "),e("span",{class:"token punctuation"},"}"),t("\n"),e("span",{class:"token punctuation"},"}"),t("\n")])]),e("div",{class:"line-numbers"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br"),e("span",{class:"line-number"},"4"),e("br"),e("span",{class:"line-number"},"5"),e("br"),e("span",{class:"line-number"},"6"),e("br"),e("span",{class:"line-number"},"7"),e("br"),e("span",{class:"line-number"},"8"),e("br"),e("span",{class:"line-number"},"9"),e("br")])],-1),m=e("p",null,[t("随后创建 "),e("em",null,"lerna.json"),t(" 配置文件")],-1),d=e("div",{class:"language-json ext-json line-numbers-mode"},[e("pre",{class:"language-json"},[e("code",null,[e("span",{class:"token punctuation"},"{"),t("\n  "),e("span",{class:"token property"},'"packages"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token punctuation"},"["),e("span",{class:"token string"},'"apps/*"'),e("span",{class:"token punctuation"},"]"),e("span",{class:"token punctuation"},","),t("\n  "),e("span",{class:"token property"},'"version"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"independent"'),e("span",{class:"token punctuation"},","),t("\n  "),e("span",{class:"token property"},'"npmClient"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"yarn"'),e("span",{class:"token punctuation"},","),t("\n  "),e("span",{class:"token property"},'"useWorkspaces"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token boolean"},"true"),t("\n"),e("span",{class:"token punctuation"},"}"),t("\n")])]),e("div",{class:"line-numbers"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br"),e("span",{class:"line-number"},"4"),e("br"),e("span",{class:"line-number"},"5"),e("br"),e("span",{class:"line-number"},"6"),e("br")])],-1),g=e("p",null,"初始化目录如下",-1),h=e("ul",null,[e("li",null,[e("em",null,"apps"),e("ul",null,[e("li",null,[e("em",null,"main"),t(": 主进程")]),e("li",null,[e("em",null,"renderer"),t(": 渲染进程")])])]),e("li",null,[e("em",null,"node_modules")]),e("li",null,[e("em",null,"lerna.json")]),e("li",null,[e("em",null,"package.json")]),e("li",null,[e("em",null,"yarn.lock")])],-1),y=t("参考: "),f={href:"https://github.com/rxliuli/electron_example/tree/b9628e1fd16bb5b6807e55e9ca72fdf2daf5bfde",target:"_blank",rel:"noopener noreferrer"},j=t("https://github.com/rxliuli/electron_example/tree/b9628e1fd16bb5b6807e55e9ca72fdf2daf5bfde"),x=e("h2",{id:"初始化渲染层模块",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#初始化渲染层模块","aria-hidden":"true"},"#"),t(" 初始化渲染层模块")],-1),v=e("p",null,"在 renderer 目录中使用 create-react-app 创建一个 react 项目，并添加",-1),w=e("div",{class:"language-bash ext-sh line-numbers-mode"},[e("pre",{class:"language-bash"},[e("code",null,"npx create-react-app apps/renderer/ --template typescript\n")]),e("div",{class:"line-numbers"},[e("span",{class:"line-number"},"1"),e("br")])],-1),_=e("p",null,"不过还需要修改其中部分配置，主要包含",-1),W=e("ul",null,[e("li",null,[t("删除 "),e("em",null,"yarn.lock"),t(" 或 "),e("em",null,"package-lock.json"),t(" 文件")])],-1),D=t("参考: "),M={href:"https://github.com/rxliuli/electron_example/tree/8e0920af985e1201fc05ca36302e094532843c2d",target:"_blank",rel:"noopener noreferrer"},C=t("https://github.com/rxliuli/electron_example/tree/8e0920af985e1201fc05ca36302e094532843c2d"),L=e("p",null,[t("尝试再 yarn 安装依赖，接着再使用 "),e("code",null,"yarn start"),t(" 启动开发环境，应该可以在浏览器中看到默认的页面。")],-1),S=e("p",null,[e("img",{src:"/assets/9aa685b675a14bf788093f2656ffc4e8.5d9732f0.png",alt:"20210106194304.png"})],-1),q=e("h2",{id:"初始化主进程模块",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#初始化主进程模块","aria-hidden":"true"},"#"),t(" 初始化主进程模块")],-1),E=t("参考: "),B={href:"https://github.com/rxliuli/electron_example/tree/a78885b76de9322dfdac82e2c220b7c6e0a9617f",target:"_blank",rel:"noopener noreferrer"},I=t("https://github.com/rxliuli/electron_example/tree/a78885b76de9322dfdac82e2c220b7c6e0a9617f"),N=t(" 注：electron 版本选择双数，生命周期更长。"),O=e("p",null,"初始化主进程模块，主要包括",-1),F=e("h3",{id:"为主进程创建-package-json",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#为主进程创建-package-json","aria-hidden":"true"},"#"),t(" 为主进程创建 package.json")],-1),J=e("div",{class:"language-json ext-json line-numbers-mode"},[e("pre",{class:"language-json"},[e("code",null,[e("span",{class:"token punctuation"},"{"),t("\n  "),e("span",{class:"token property"},'"name"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"main"'),e("span",{class:"token punctuation"},","),t("\n  "),e("span",{class:"token property"},'"version"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"0.1.0"'),t("\n"),e("span",{class:"token punctuation"},"}"),t("\n")])]),e("div",{class:"line-numbers"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br"),e("span",{class:"line-number"},"4"),e("br")])],-1),R=e("h3",{id:"添加依赖-yarn-add-electron-electron-builder-typescript",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#添加依赖-yarn-add-electron-electron-builder-typescript","aria-hidden":"true"},"#"),t(" 添加依赖 "),e("code",null,"yarn add electron electron-builder typescript")],-1),T=e("div",{class:"language-json ext-json line-numbers-mode"},[e("pre",{class:"language-json"},[e("code",null,[e("span",{class:"token comment"},"// package.json"),t("\n"),e("span",{class:"token punctuation"},"{"),t("\n  "),e("span",{class:"token property"},'"devDependencies"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token punctuation"},"{"),t("\n    "),e("span",{class:"token property"},'"electron"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"^10.2.0"'),e("span",{class:"token punctuation"},","),t("\n    "),e("span",{class:"token property"},'"electron-builder"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"^22.9.1"'),e("span",{class:"token punctuation"},","),t("\n    "),e("span",{class:"token property"},'"typescript"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"^4.1.3"'),t("\n  "),e("span",{class:"token punctuation"},"}"),t("\n"),e("span",{class:"token punctuation"},"}"),t("\n")])]),e("div",{class:"line-numbers"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br"),e("span",{class:"line-number"},"4"),e("br"),e("span",{class:"line-number"},"5"),e("br"),e("span",{class:"line-number"},"6"),e("br"),e("span",{class:"line-number"},"7"),e("br"),e("span",{class:"line-number"},"8"),e("br")])],-1),U=e("h3",{id:"添加-tsconfig-json-配置文件",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#添加-tsconfig-json-配置文件","aria-hidden":"true"},"#"),t(" 添加 "),e("em",null,"tsconfig.json"),t(" 配置文件")],-1),V=e("div",{class:"language-json ext-json line-numbers-mode"},[e("pre",{class:"language-json"},[e("code",null,[e("span",{class:"token comment"},"// tsconfig.json"),t("\n"),e("span",{class:"token punctuation"},"{"),t("\n  "),e("span",{class:"token property"},'"compilerOptions"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token punctuation"},"{"),t("\n    "),e("span",{class:"token comment"},"// nodejs 生态大多数都支持这种模块"),t("\n    "),e("span",{class:"token property"},'"module"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"commonjs"'),e("span",{class:"token punctuation"},","),t("\n    "),e("span",{class:"token comment"},"// 优先考虑输出 es5"),t("\n    "),e("span",{class:"token property"},'"target"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"es5"'),e("span",{class:"token punctuation"},","),t("\n    "),e("span",{class:"token comment"},"// 但不要自缚手脚，仍然使用最新的 es 特性"),t("\n    "),e("span",{class:"token property"},'"lib"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token punctuation"},"["),e("span",{class:"token string"},'"ESNext"'),e("span",{class:"token punctuation"},"]"),e("span",{class:"token punctuation"},","),t("\n    "),e("span",{class:"token comment"},"// 定义源目录与输出目录"),t("\n    "),e("span",{class:"token property"},'"rootDir"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"src"'),e("span",{class:"token punctuation"},","),t("\n    "),e("span",{class:"token property"},'"outDir"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"dist"'),e("span",{class:"token punctuation"},","),t("\n    "),e("span",{class:"token comment"},"// 生成 sourceMap 方便 IDE 本地调试"),t("\n    "),e("span",{class:"token property"},'"sourceMap"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token boolean"},"true"),e("span",{class:"token punctuation"},","),t("\n    "),e("span",{class:"token comment"},"// 禁止 ts 检查 npm 依赖的类型定义（例如 electron 的类型定义就很容易被 ts 检查出错误，毕竟这个项目实在太大了）"),t("\n    "),e("span",{class:"token property"},'"skipLibCheck"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token boolean"},"true"),e("span",{class:"token punctuation"},","),t("\n    "),e("span",{class:"token property"},'"skipDefaultLibCheck"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token boolean"},"true"),t("\n  "),e("span",{class:"token punctuation"},"}"),e("span",{class:"token punctuation"},","),t("\n  "),e("span",{class:"token comment"},"// 排除依赖目录与输出目录"),t("\n  "),e("span",{class:"token property"},'"exclude"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token punctuation"},"["),e("span",{class:"token string"},'"node_modules"'),e("span",{class:"token punctuation"},","),t(),e("span",{class:"token string"},'"dist"'),e("span",{class:"token punctuation"},"]"),t("\n"),e("span",{class:"token punctuation"},"}"),t("\n")])]),e("div",{class:"line-numbers"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br"),e("span",{class:"line-number"},"4"),e("br"),e("span",{class:"line-number"},"5"),e("br"),e("span",{class:"line-number"},"6"),e("br"),e("span",{class:"line-number"},"7"),e("br"),e("span",{class:"line-number"},"8"),e("br"),e("span",{class:"line-number"},"9"),e("br"),e("span",{class:"line-number"},"10"),e("br"),e("span",{class:"line-number"},"11"),e("br"),e("span",{class:"line-number"},"12"),e("br"),e("span",{class:"line-number"},"13"),e("br"),e("span",{class:"line-number"},"14"),e("br"),e("span",{class:"line-number"},"15"),e("br"),e("span",{class:"line-number"},"16"),e("br"),e("span",{class:"line-number"},"17"),e("br"),e("span",{class:"line-number"},"18"),e("br"),e("span",{class:"line-number"},"19"),e("br"),e("span",{class:"line-number"},"20"),e("br"),e("span",{class:"line-number"},"21"),e("br")])],-1),z=e("h3",{id:"添加-src-main-ts-基本的启动文件",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#添加-src-main-ts-基本的启动文件","aria-hidden":"true"},"#"),t(" 添加 "),e("em",null,"src/main.ts"),t(" 基本的启动文件")],-1),A=e("div",{class:"language-typescript ext-ts line-numbers-mode"},[e("pre",{class:"language-typescript"},[e("code",null,[e("span",{class:"token comment"},"// src/main.ts"),t("\n"),e("span",{class:"token keyword"},"import"),t(),e("span",{class:"token punctuation"},"{"),t(" app"),e("span",{class:"token punctuation"},","),t(" BrowserWindow "),e("span",{class:"token punctuation"},"}"),t(),e("span",{class:"token keyword"},"from"),t(),e("span",{class:"token string"},'"electron"'),e("span",{class:"token punctuation"},";"),t("\n\n"),e("span",{class:"token keyword"},"async"),t(),e("span",{class:"token keyword"},"function"),t(),e("span",{class:"token function"},"createMainWindow"),e("span",{class:"token punctuation"},"("),e("span",{class:"token punctuation"},")"),t(),e("span",{class:"token punctuation"},"{"),t("\n  "),e("span",{class:"token comment"},"// 创建新的 electron 窗口"),t("\n  "),e("span",{class:"token keyword"},"const"),t(" mainWindow "),e("span",{class:"token operator"},"="),t(),e("span",{class:"token keyword"},"new"),t(),e("span",{class:"token class-name"},"BrowserWindow"),e("span",{class:"token punctuation"},"("),e("span",{class:"token punctuation"},")"),e("span",{class:"token punctuation"},";"),t("\n  "),e("span",{class:"token comment"},"// 载入开发环境的 url"),t("\n  "),e("span",{class:"token keyword"},"await"),t(" mainWindow"),e("span",{class:"token punctuation"},"."),e("span",{class:"token function"},"loadURL"),e("span",{class:"token punctuation"},"("),e("span",{class:"token string"},'"http://localhost:3000/"'),e("span",{class:"token punctuation"},")"),e("span",{class:"token punctuation"},";"),t("\n"),e("span",{class:"token punctuation"},"}"),t("\n\n"),e("span",{class:"token doc-comment comment"},"/**\n * main 函数\n */"),t("\n"),e("span",{class:"token keyword"},"async"),t(),e("span",{class:"token keyword"},"function"),t(),e("span",{class:"token function"},"main"),e("span",{class:"token punctuation"},"("),e("span",{class:"token punctuation"},")"),t(),e("span",{class:"token punctuation"},"{"),t("\n  app"),e("span",{class:"token punctuation"},"."),e("span",{class:"token function"},"on"),e("span",{class:"token punctuation"},"("),e("span",{class:"token string"},'"ready"'),e("span",{class:"token punctuation"},","),t(" createMainWindow"),e("span",{class:"token punctuation"},")"),e("span",{class:"token punctuation"},";"),t("\n"),e("span",{class:"token punctuation"},"}"),t("\n\n"),e("span",{class:"token function"},"main"),e("span",{class:"token punctuation"},"("),e("span",{class:"token punctuation"},")"),e("span",{class:"token punctuation"},";"),t("\n")])]),e("div",{class:"line-numbers"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br"),e("span",{class:"line-number"},"4"),e("br"),e("span",{class:"line-number"},"5"),e("br"),e("span",{class:"line-number"},"6"),e("br"),e("span",{class:"line-number"},"7"),e("br"),e("span",{class:"line-number"},"8"),e("br"),e("span",{class:"line-number"},"9"),e("br"),e("span",{class:"line-number"},"10"),e("br"),e("span",{class:"line-number"},"11"),e("br"),e("span",{class:"line-number"},"12"),e("br"),e("span",{class:"line-number"},"13"),e("br"),e("span",{class:"line-number"},"14"),e("br"),e("span",{class:"line-number"},"15"),e("br"),e("span",{class:"line-number"},"16"),e("br"),e("span",{class:"line-number"},"17"),e("br"),e("span",{class:"line-number"},"18"),e("br")])],-1),G=e("h3",{id:"更新-package-json-添加几个-npm-script",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#更新-package-json-添加几个-npm-script","aria-hidden":"true"},"#"),t(" 更新 "),e("em",null,"package.json"),t(" 添加几个 npm script")],-1),H=e("div",{class:"language-json ext-json line-numbers-mode"},[e("pre",{class:"language-json"},[e("code",null,[e("span",{class:"token comment"},"// package.json"),t("\n"),e("span",{class:"token punctuation"},"{"),t("\n  "),e("span",{class:"token property"},'"scripts"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token punctuation"},"{"),t("\n    "),e("span",{class:"token comment"},"// 编译 ts 代码"),t("\n    "),e("span",{class:"token property"},'"compile"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"tsc"'),e("span",{class:"token punctuation"},","),t("\n    "),e("span",{class:"token comment"},"// 编译 tsc 代码且启动监听模式"),t("\n    "),e("span",{class:"token property"},'"watch"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"yarn compile -w"'),e("span",{class:"token punctuation"},","),t("\n    "),e("span",{class:"token comment"},"// 在主进程通过 lerna 启动渲染进程模块的开发环境"),t("\n    "),e("span",{class:"token property"},'"dev:web"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"lerna run --scope renderer start"'),e("span",{class:"token punctuation"},","),t("\n    "),e("span",{class:"token comment"},"// 启动主进程的开发环境"),t("\n    "),e("span",{class:"token property"},'"dev:electron"'),e("span",{class:"token operator"},":"),t(),e("span",{class:"token string"},'"electron ./dist/main.js"'),t("\n  "),e("span",{class:"token punctuation"},"}"),t("\n"),e("span",{class:"token punctuation"},"}"),t("\n")])]),e("div",{class:"line-numbers"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br"),e("span",{class:"line-number"},"4"),e("br"),e("span",{class:"line-number"},"5"),e("br"),e("span",{class:"line-number"},"6"),e("br"),e("span",{class:"line-number"},"7"),e("br"),e("span",{class:"line-number"},"8"),e("br"),e("span",{class:"line-number"},"9"),e("br"),e("span",{class:"line-number"},"10"),e("br"),e("span",{class:"line-number"},"11"),e("br"),e("span",{class:"line-number"},"12"),e("br"),e("span",{class:"line-number"},"13"),e("br")])],-1),K=e("p",null,"接下来，我们通过这些 npm script 启动 electron 开发环境",-1),P=e("ol",null,[e("li",null,[t("运行 "),e("code",null,"yarn watch")]),e("li",null,[t("运行 "),e("code",null,"dev:web")]),e("li",null,[t("等待以上两条命令都运行完成，再继续运行 "),e("code",null,"dev:electron")])],-1),Q=e("p",null,"现在，你应该可以看到一个 electron 窗口，其中显示着。",-1),X=e("p",null,[e("img",{src:"/assets/be9a61a9bb6c466a86f0fe9c1ea499a6.f55af509.png",alt:"20210106194102.png"})],-1),Y=e("h2",{id:"总结",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#总结","aria-hidden":"true"},"#"),t(" 总结")],-1),Z=e("p",null,"目前，使用 lerna monorepo 似乎还看不出来明显的优点，不过实际上在后面逐步完善 Electron 程序的过程中我们会发现它的强大之处。",-1);o.render=function(t,o){const $=n("OutboundLink");return s(),a(l,null,[c,p,r,u,i,k,b,m,d,g,h,e("blockquote",null,[e("p",null,[y,e("a",f,[j,e($)])])]),x,v,w,_,W,e("blockquote",null,[e("p",null,[D,e("a",M,[C,e($)])])]),L,S,q,e("blockquote",null,[e("p",null,[E,e("a",B,[I,e($)]),N])]),O,F,J,R,T,U,V,z,A,G,H,K,P,Q,X,Y,Z],64)};export{o as default};
